<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Mini Escape Room</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
</head>

<body>
<a-scene>

  <!-- Î¦Î©Î¤Î™Î£ÎœÎŸÎ£ -->
  <a-light type="ambient" intensity="1"></a-light>
  <a-light type="point" intensity="1" position="0 3 2"></a-light>

  <!-- Î Î‘Î¤Î©ÎœÎ‘ -->
  <a-plane rotation="-90 0 0" width="12" height="12" color="#555"></a-plane>

  <!-- Î¤ÎŸÎ™Î§ÎŸÎ™ -->
  <a-plane position="0 2 -6" width="12" height="4" color="#888"></a-plane>
  <a-plane position="-6 2 0" rotation="0 90 0" width="12" height="4" color="#777"></a-plane>
  <a-plane position="6 2 0" rotation="0 -90 0" width="12" height="4" color="#777"></a-plane>
  <a-plane position="0 2 6" rotation="0 180 0" width="12" height="4" color="#777"></a-plane>

  <!-- Î ÎŸÎ¡Î¤Î‘ -->
  <a-box id="door"
         position="0 1 -5.8"
         width="1"
         height="2"
         depth="0.1"
         material="color: red; emissive: red; emissiveIntensity: 0.5"
         door>
  </a-box>

  <!-- ÎšÎ›Î•Î™Î”Î™ -->
  <a-cylinder id="key"
              position="3 0.3 -2"
              radius="0.05"
              height="0.3"
              material="color: gold; emissive: yellow; emissiveIntensity: 1"
              key>
  </a-cylinder>

  <!-- ÎœÎ—ÎÎ¥ÎœÎ‘ -->
  <a-text id="msg"
          value="Find the key to unlock the door"
          position="0 2.3 -2"
          align="center"
          width="5"
          color="white">
  </a-text>

  <!-- CAMERA -->
  <a-camera position="0 1.6 4" wasd-controls look-controls>
    <a-cursor color="yellow"></a-cursor>
  </a-camera>

</a-scene>

<script>
let hasKey = false;

/* KEY */
AFRAME.registerComponent('key', {
  init: function () {
    this.el.addEventListener('click', () => {

      hasKey = true;
      this.el.setAttribute('visible', false);

      const door = document.getElementById("door");

      // Î ÏŒÏÏ„Î± Î³Î¯Î½ÎµÏ„Î±Î¹ Î ÎŸÎ¡Î¤ÎŸÎšÎ‘Î›Î™ ÏŒÏ„Î±Î½ Î¾ÎµÎºÎ»ÎµÎ¹Î´ÏÎ½ÎµÎ¹
      door.setAttribute(
        "material",
        "color: orange; emissive: orange; emissiveIntensity: 1"
      );

      document.getElementById("msg")
        .setAttribute("value", "You picked up the key! Door unlocked ğŸ”“");
    });
  }
});

/* DOOR */
AFRAME.registerComponent('door', {
  init: function () {
    this.el.addEventListener('click', () => {

      if (!hasKey) {
        document.getElementById("msg")
          .setAttribute("value", "The door is locked... Find the key!");
        return;
      }

      // Î ÏŒÏÏ„Î± Î³Î¯Î½ÎµÏ„Î±Î¹ Î Î¡Î‘Î£Î™ÎÎ— ÏŒÏ„Î±Î½ Î±Î½Î¿Î¯Î³ÎµÎ¹
      this.el.setAttribute(
        "material",
        "color: lime; emissive: lime; emissiveIntensity: 1"
      );

      document.getElementById("msg")
        .setAttribute("value", "Door opened! You escaped ğŸ‰");
    });
  }
});
</script>

</body>
</html>
